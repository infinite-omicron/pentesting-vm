build {
  name        = "pentesting-vagrant"
  description = "Penetration Testing Virtual Machine"

  sources = [
    "source.vagrant.alpine"
  ]

  provisioner "shell" {
    scripts = [
      "scripts/dependencies.sh",
      "scripts/apktool.sh",
      "scripts/dex2jar.sh",
      "scripts/jd_cmd.sh",
      "scripts/theharvester.sh",
      "scripts/zaproxy.sh",
      "scripts/firefox.sh"
    ]
    execute_command = "echo 'vagrant' | sudo -S -E sh -c '{{ .Vars }} {{ .Path }}'"
  }
}

build {
  name        = "pentesting-docker"
  description = "Penetration Testing Virtual Machine"

  sources = [
    "source.docker.alpine"
  ]

  provisioner "shell" {
    scripts = [
      "scripts/dependencies.sh",
      "scripts/apktool.sh",
      "scripts/dex2jar.sh",
      "scripts/jd_cmd.sh",
      "scripts/theharvester.sh",
      "scripts/zaproxy.sh",
      "scripts/firefox.sh"
    ]
  }

  provisioner "shell" {
    /* Fix permissions */
    inline = ["chown -R root:root /opt"]
  }
}
