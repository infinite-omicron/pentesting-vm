Vagrant.configure("2") do |config|
  config.vm.box = "generic/alpine312"

  config.vm.provider "virtualbox" do |vb|
    vb.name = "pentesting-vm"
  end
  
  config.vm.provision "shell", inline: <<-SHELL
    apk update && \
    apk add \
      curl \
      g++ \
      gcc \
      go \
      git \
      libffi-dev \
      openssl-dev \
      nikto \
      nmap \
      python3-dev \
      py3-pip
    go get github.com/OJ/gobuster
    python3 -m pip install --upgrade pip && \
    pip install mitmproxy sqlmap sslyze
    git clone https://github.com/mobsf/mobile-security-framework-mobsf /opt/mobsf
    cd /opt/mobsf && \
      ./setup.sh && \
      ln -s /opt/mobsf/run.sh /usr/local/bin/mobsf
    git clone git clone https://github.com/laramies/theharvester /opt/theharvester
    cd /opt/theharvester && \
      python3 -m pip install -r requirements/base.txt && \
      ln -s /opt/theharvester/theHarvester.py /usr/local/bin/theHarvester
    cd /opt && \
      curl -O https://github.com/zaproxy/zaproxy/releases/download/v2.9.0/ZAP_2.9.0_Linux.tar.gz && \
      tar -xf ZAP_2.9.0_Linux.tar.gz && rm -rf ZAP_2.9.0_Linux.tar.gz
  SHELL

end
